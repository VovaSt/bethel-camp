<div class="header">
    <div class="week-controls">
        <button
            class="week-btn"
            (click)="getPreviosWeek()"
        >
            <img src="assets/images/arrow.svg" alt="Налаштування">
        </button>

        <div class="title" [innerHTML]="title"></div>

        <button
            class="week-btn"
            (click)="getNextWeek()"
        >
            <img src="assets/images/arrow.svg" class="reverse" alt="Налаштування">
        </button>
    </div>

    <div class="button-controls">
        <button
            class="settings-btn"
            (click)="showSettings = !showSettings"
        >
            <mat-icon [class.rotated]="showSettings">settings</mat-icon>
        </button>
    </div>
</div>

<div class="toolbar" [class.show]="showSettings">
    <div class="left-column">
        <div class="type">
            <input
                type="checkbox"
                id="all"
                name="all"
                [checked]="showAllTypes"

            />
        <label for="all">всі події</label>
        </div>
        <div class="type" *ngFor="let item of showTypes">
            <input
                type="checkbox"
                id="{{item.type}}"
                name="{{item.type}}"
                [checked]="item.show"
                (change)="checkTypes(item.type)"
            />
            <label for="{{item.type}}">{{item.label}}</label>
        </div>

    </div>
</div>

<div class="body">
    <div
        class="day"
        *ngFor="let day of weekDays"
        [attr.data-id]="day.id"
        [attr.data-day]="day.nameOfDay"
        [class.today]="day.id === today"
    >
        <div class="label">
            <div class="number">{{ day.date | date:'d' }}</div>
            <div class="name">{{ day.nameOfDay }}</div>
        </div>

        <div class="content">
            <div
                class="event"
                *ngFor="let event of data[day.id] | eventsFilterByType:showTypes"
                [ngStyle]="{'background-color': getEventColor(event)}"
            >
                <div class="left-part">
                    {{ event.start }} {{ event.finish }}
                </div>
                <div class="main-part">
                    <div class="name">{{ event.name }}</div>
                    <div *ngIf="event.place" class="row">
                        Місце:
                        {{ event.place }}
                    </div>
                    <div *ngIf="event.person" class="row">
                        Відповідальний:
                        {{ event.person }}
                    </div>
                    <div *ngIf="event.preachers?.length" class="row">
                        Проповідники:
                        {{ event.preachers.join(', ') }}
                    </div>
                    <div *ngIf="event.singers?.length" class="row">
                        Музичний гурт:
                        {{ event.singers.join(', ') }}
                    </div>
                </div>
                <div class="right-part">
                    <div *ngIf="event.cars?.length" class="row">
                        <mat-icon
                            matTooltip="{{event.cars.join(', ')}}"
                        >local_shipping</mat-icon>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
